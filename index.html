<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto 24H Top Movers</title>
<style>
body { font-family: Arial, sans-serif; margin: 0; background: #f0f2f5; }
h1, h2 { text-align: center; margin: 20px 0; }
h1 { font-size: 32px; }
h2 { font-size: 26px; margin-top: 40px; }
.container { display: flex; flex-wrap: wrap; justify-content: center; margin: 20px; padding: 20px; border-radius: 12px; }
.gainers-section { background: #f0f2f5; }
.losers-section { background: #ffe6e6; }
.bubble {
    border-radius: 50%; width: 150px; height: 150px; margin: 15px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); transition: 0.3s; background: white;
}
.bubble:hover { transform: scale(1.08); }
img { width: 50px; height: 50px; border-radius: 50%; }
.symbol { font-size: 18px; font-weight: bold; margin-top: 8px; text-align: center; word-wrap: break-word; }
.percent { margin-top: 4px; font-size: 16px; font-weight: bold; text-align: center; }
.gainer-percent { color: green; }
.loser-percent { color: red; }
footer { text-align: center; margin: 20px 0; font-size: 14px; color: #555; }
button { display:block; margin: 10px auto; padding:10px 20px; font-size:16px; border:none; border-radius:5px; background:#333; color:white; cursor:pointer;}
</style>
</head>
<body>
<h1>ðŸ”¥ Crypto 24H Top Movers</h1>
<h2>Top 20 Gainers</h2>
<div class="container gainers-section" id="gainers"></div>
<footer>CDTG v1.0 | Top Gainers | Generated by @TraderAbba</footer>

<h2>Top 20 Losers</h2>
<div class="container losers-section" id="losers"></div>
<footer>CDTG v1.0 | Top Losers | Generated by @TraderAbba</footer>

<button onclick="window.location.reload()">ðŸ”„ Refresh</button>

<script>
async function fetchData() {
    try {
        let allCoins = [];
        for (let page = 1; page <= 5; page++) {
            const res = await fetch(`https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=${page}&price_change_percentage=24h`);
            const data = await res.json();
            allCoins = allCoins.concat(data);
        }
        const coinsWithChange = allCoins.filter(c => c.price_change_percentage_24h != null);

        const topGainers = coinsWithChange.sort((a,b) => b.price_change_percentage_24h - a.price_change_percentage_24h).slice(0,20);
        const topLosers = coinsWithChange.sort((a,b) => a.price_change_percentage_24h - b.price_change_percentage_24h).slice(0,20);

        const gainersDiv = document.getElementById("gainers");
        gainersDiv.innerHTML = "";
        topGainers.forEach(c => {
            gainersDiv.innerHTML += `<div class="bubble">
                <img src="${c.image}" alt="${c.symbol.toUpperCase()}">
                <div class="symbol">${c.symbol.toUpperCase()}</div>
                <div class="percent gainer-percent">${c.price_change_percentage_24h.toFixed(2)}%</div>
            </div>`;
        });

        const losersDiv = document.getElementById("losers");
        losersDiv.innerHTML = "";
        topLosers.forEach(c => {
            losersDiv.innerHTML += `<div class="bubble">
                <img src="${c.image}" alt="${c.symbol.toUpperCase()}">
                <div class="symbol">${c.symbol.toUpperCase()}</div>
                <div class="percent loser-percent">${c.price_change_percentage_24h.toFixed(2)}%</div>
            </div>`;
        });

    } catch (err) {
        console.error(err);
        alert("Error fetching data from CoinGecko");
    }
}

fetchData();
</script>
</body>
</html>
