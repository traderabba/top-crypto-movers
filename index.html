<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto 24H Top Movers</title>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#333333">
</head>
<body>

<h1>ðŸ”¥ Crypto 24H Top Movers</h1>

<div id="loading">Loading data, please hold on...</div>

<h2>Top 20 Gainers</h2>
<div class="container gainers-section" id="gainers"></div>

<h2>Top 20 Losers</h2>
<div class="container losers-section" id="losers"></div>

<footer>CDTG v1.0 | Top Losers | Generated by @TraderAbba</footer>

<button onclick="fetchData()">ðŸ”„ Refresh</button>

<!-- html2canvas for download functionality -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="script.js"></script>
<script>
// Service Worker registration
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js').then(registration => {
      console.log('Service Worker registered with scope:', registration.scope);
    }).catch(err => {
      console.log('Service Worker registration failed:', err);
    });
  });
}

// Download bubble as image
function downloadBubble(bubbleId) {
  const element = document.getElementById(bubbleId);
  html2canvas(element).then(canvas => {
    const link = document.createElement('a');
    link.download = `${bubbleId}.png`;
    link.href = canvas.toDataURL();
    link.click();
  });
}
</script>

</body>
</html>